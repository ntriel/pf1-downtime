{"name":"Downtime Rolls (Die only)","type":"script","author":"BtAhBRW9P5xaS8hf","img":"icons/svg/dice-target.svg","scope":"global","command":"async function Main(rollCount, start = 0){\n\tlet message = \"\";\n\tfor(let i = start; i < rollCount; i++){\n\t\tlet r = new Roll(\"1d20\");\n\t\tlet res = await r.evaluate();\n\t\tUpdateSpreadSheet(\"1OnVp8mTgYzhw3QMffNfrnLnPFnHlxM6tCTGJ3MYe6K4\", \"Personal Downtime\", \"P\" + (i + 3), res.total);\n\t\tmessage += res.total + \"<br>\";\n\t}\n\tlet chatData = {\n\t   user: game.user.id,\n\t   content: message\n\t};\n\tChatMessage.create(chatData, {});\n}\nif(typeof SimpleCalendar != \"undefined\"){\n\tlet curDay = SimpleCalendar.api.getCurrentDay().numericRepresentation;\n\tlet numDays = SimpleCalendar.api.getCurrentMonth().numberOfDays;\n\tlet diff = numDays - curDay;\n\td = new Dialog({\n\t\ttitle: \"Downtime rolls\",\n\t\tcontent: `\n\t\t\t<h2>Current Day: ${curDay} of ${numDays} (${diff})</h2>\n\t\t\t<input type=\"text\" id=\"rollCount\" value=\"\" placeholder=\"How many rolls?\"/>\n\t\t`,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\t//icon: '<i class=\"fas fa-check\"></i>',\n\t\t\t\tlabel: \"Cancel\",\n\t\t\t\tcallback: () => {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\troll: {\n\t\t\t\ticon: '<i class=\"fas fa-dice\"></i>',\n\t\t\t\tlabel: \"Roll\",\n\t\t\t\tcallback: (html) => {\n\t\t\t\t\tMain(html.find(\"#rollCount\")[0].value, curDay + 3);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdefault: \"roll\",\n\t\trender: html => console.log(\"Register interactivity in the rendered dialog\"),\n\t\tclose: html => console.log(\"This always is logged no matter which option is chosen\")\n\t});\n\td.render(true);\n}else{\n\td = new Dialog({\n\t\ttitle: \"Downtime rolls\",\n\t\tcontent: `\n\t\t\t<input type=\"text\" id=\"rollCount\" value=\"\" placeholder=\"How many rolls?\"/>\n\t\t`,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\t//icon: '<i class=\"fas fa-check\"></i>',\n\t\t\t\tlabel: \"Cancel\",\n\t\t\t\tcallback: () => {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\troll: {\n\t\t\t\ticon: '<i class=\"fas fa-dice\"></i>',\n\t\t\t\tlabel: \"Roll\",\n\t\t\t\tcallback: (html) => {\n\t\t\t\t\tMain(html.find(\"#rollCount\")[0].value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdefault: \"roll\",\n\t\trender: html => console.log(\"Register interactivity in the rendered dialog\"),\n\t\tclose: html => console.log(\"This always is logged no matter which option is chosen\")\n\t});\n\td.render(true);\n}","folder":null,"sort":0,"permission":{"default":0,"BtAhBRW9P5xaS8hf":3},"flags":{"core":{"sourceId":"Macro.ndJ4zr5podxyvd7T"}},"_id":"1r7bkCa49aixuwkV"}
{"name":"Downtime Activities","type":"script","author":"BtAhBRW9P5xaS8hf","img":"icons/svg/dice-target.svg","scope":"global","command":"pf1Downtime.DowntimeActivities();","folder":null,"sort":0,"permission":{"default":0,"BtAhBRW9P5xaS8hf":3},"flags":{"core":{"sourceId":"Macro.WXOvo3HTnWUnTb8Q"}},"_id":"DAcLx5OVplWNQLrU"}
{"name":"Start Kingdom Downtime","type":"script","author":"BtAhBRW9P5xaS8hf","img":"icons/svg/dice-target.svg","scope":"global","command":"StartKingdomDowntime();","folder":null,"sort":0,"permission":{"default":0,"BtAhBRW9P5xaS8hf":3},"flags":{"core":{"sourceId":"Macro.MWLf7yZ9rV1XNH2i"}},"_id":"rwcM6I4CAs4AVYeG"}
{"name":"Downtime Rolls (Die only)","type":"script","author":"BtAhBRW9P5xaS8hf","img":"icons/svg/dice-target.svg","scope":"global","command":"async function Main(rollCount, start = 0){\n\tlet message = \"\";\n\tfor(let i = start; i < rollCount; i++){\n\t\tlet r = new Roll(\"1d20\");\n\t\tlet res = await r.evaluate();\n\t\tif(game.user.character != null && CharacterRollCol[game.user.character.data.name] != null){\n\t\t\tUpdateSpreadSheet(\"1OnVp8mTgYzhw3QMffNfrnLnPFnHlxM6tCTGJ3MYe6K4\", \"Personal Downtime\", CharacterRollCol[game.user.character.data.name] + (i + 3), res.total);\n\t\t}else if(canvas.tokens.controlled.length > 0 && CharacterRollCol[canvas.tokens.controlled[0].actor.data.name] != null){\n\t\t\tUpdateSpreadSheet(\"1OnVp8mTgYzhw3QMffNfrnLnPFnHlxM6tCTGJ3MYe6K4\", \"Personal Downtime\", CharacterRollCol[canvas.tokens.controlled[0].actor.data.name] + (i + 3), res.total);\n\t\t}else{\n\t\t\tui.notifications.warn(\"No character selected\");\n\t\t}\n\t\t\n\t\tmessage += res.total + \"<br>\";\n\t}\n\tlet chatData = {\n\t   user: game.user.id,\n\t   content: message\n\t};\n\tChatMessage.create(chatData, {});\n}\nif(typeof SimpleCalendar != \"undefined\"){\n\tlet curDay = SimpleCalendar.api.getCurrentDay().numericRepresentation;\n\tlet numDays = SimpleCalendar.api.getCurrentMonth().numberOfDays;\n\tlet diff = numDays - curDay;\n\td = new Dialog({\n\t\ttitle: \"Downtime rolls\",\n\t\tcontent: `\n\t\t\t<h2>Current Day: ${curDay} of ${numDays} (${diff})</h2>\n\t\t\t<input type=\"text\" id=\"rollCount\" value=\"\" placeholder=\"How many rolls?\"/>\n\t\t`,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\t//icon: '<i class=\"fas fa-check\"></i>',\n\t\t\t\tlabel: \"Cancel\",\n\t\t\t\tcallback: () => {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\troll: {\n\t\t\t\ticon: '<i class=\"fas fa-dice\"></i>',\n\t\t\t\tlabel: \"Roll\",\n\t\t\t\tcallback: (html) => {\n\t\t\t\t\tMain(html.find(\"#rollCount\")[0].value, curDay + 3);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdefault: \"roll\",\n\t\trender: html => console.log(\"Register interactivity in the rendered dialog\"),\n\t\tclose: html => console.log(\"This always is logged no matter which option is chosen\")\n\t});\n\td.render(true);\n}else{\n\td = new Dialog({\n\t\ttitle: \"Downtime rolls\",\n\t\tcontent: `\n\t\t\t<input type=\"text\" id=\"rollCount\" value=\"\" placeholder=\"How many rolls?\"/>\n\t\t`,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\t//icon: '<i class=\"fas fa-check\"></i>',\n\t\t\t\tlabel: \"Cancel\",\n\t\t\t\tcallback: () => {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\troll: {\n\t\t\t\ticon: '<i class=\"fas fa-dice\"></i>',\n\t\t\t\tlabel: \"Roll\",\n\t\t\t\tcallback: (html) => {\n\t\t\t\t\tMain(html.find(\"#rollCount\")[0].value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdefault: \"roll\",\n\t\trender: html => console.log(\"Register interactivity in the rendered dialog\"),\n\t\tclose: html => console.log(\"This always is logged no matter which option is chosen\")\n\t});\n\td.render(true);\n}","folder":null,"sort":0,"permission":{"default":0,"BtAhBRW9P5xaS8hf":3},"flags":{"core":{"sourceId":"Macro.ndJ4zr5podxyvd7T"}},"_id":"vbP8FydMhG91DIVM"}
{"$$deleted":true,"_id":"DAcLx5OVplWNQLrU"}
{"$$deleted":true,"_id":"1r7bkCa49aixuwkV"}
{"$$deleted":true,"_id":"rwcM6I4CAs4AVYeG"}
{"$$deleted":true,"_id":"vbP8FydMhG91DIVM"}
{"name":"Downtime Activities","type":"script","author":"BtAhBRW9P5xaS8hf","img":"icons/svg/dice-target.svg","scope":"global","command":"pf1Downtime.DowntimeActivities();","folder":null,"sort":0,"permission":{"default":0,"BtAhBRW9P5xaS8hf":3},"flags":{"core":{"sourceId":"Macro.WXOvo3HTnWUnTb8Q"}},"_id":"HVzv5FXWbJY1dAqN"}
{"name":"Start Kingdom Downtime","type":"script","author":"BtAhBRW9P5xaS8hf","img":"icons/svg/dice-target.svg","scope":"global","command":"StartKingdomDowntime();","folder":null,"sort":0,"permission":{"default":0,"BtAhBRW9P5xaS8hf":3},"flags":{"core":{"sourceId":"Macro.MWLf7yZ9rV1XNH2i"}},"_id":"bFsMNZfvoH4xaUtR"}
{"name":"Downtime Rolls (Die only)","type":"script","author":"BtAhBRW9P5xaS8hf","img":"icons/svg/dice-target.svg","scope":"global","command":"async function Main(rollCount, start = 0){\n\tlet message = \"\";\n\tfor(let i = start; i < rollCount; i++){\n\t\tlet r = new Roll(\"1d20\");\n\t\tlet res = await r.evaluate();\n\t\tif(game.user.character != null && CharacterRollCol[game.user.character.data.name] != null){\n\t\t\tUpdateSpreadSheet(\"1OnVp8mTgYzhw3QMffNfrnLnPFnHlxM6tCTGJ3MYe6K4\", \"Personal Downtime\", CharacterRollCol[game.user.character.data.name] + (i + 3), res.total);\n\t\t}else if(canvas.tokens.controlled.length > 0 && CharacterRollCol[canvas.tokens.controlled[0].actor.data.name] != null){\n\t\t\tUpdateSpreadSheet(\"1OnVp8mTgYzhw3QMffNfrnLnPFnHlxM6tCTGJ3MYe6K4\", \"Personal Downtime\", CharacterRollCol[canvas.tokens.controlled[0].actor.data.name] + (i + 3), res.total);\n\t\t}else{\n\t\t\tui.notifications.warn(\"No character selected\");\n\t\t}\n\t\t\n\t\tmessage += res.total + \"<br>\";\n\t}\n\tlet chatData = {\n\t   user: game.user.id,\n\t   content: message\n\t};\n\tChatMessage.create(chatData, {});\n}\nif(typeof SimpleCalendar != \"undefined\"){\n\tlet curDay = SimpleCalendar.api.getCurrentDay().numericRepresentation;\n\tlet numDays = SimpleCalendar.api.getCurrentMonth().numberOfDays;\n\tlet diff = numDays - curDay;\n\td = new Dialog({\n\t\ttitle: \"Downtime rolls\",\n\t\tcontent: `\n\t\t\t<h2>Current Day: ${curDay} of ${numDays} (${diff})</h2>\n\t\t\t<input type=\"text\" id=\"rollCount\" value=\"\" placeholder=\"How many rolls?\"/>\n\t\t`,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\t//icon: '<i class=\"fas fa-check\"></i>',\n\t\t\t\tlabel: \"Cancel\",\n\t\t\t\tcallback: () => {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\troll: {\n\t\t\t\ticon: '<i class=\"fas fa-dice\"></i>',\n\t\t\t\tlabel: \"Roll\",\n\t\t\t\tcallback: (html) => {\n\t\t\t\t\tMain(html.find(\"#rollCount\")[0].value, curDay + 3);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdefault: \"roll\",\n\t\trender: html => console.log(\"Register interactivity in the rendered dialog\"),\n\t\tclose: html => console.log(\"This always is logged no matter which option is chosen\")\n\t});\n\td.render(true);\n}else{\n\td = new Dialog({\n\t\ttitle: \"Downtime rolls\",\n\t\tcontent: `\n\t\t\t<input type=\"text\" id=\"rollCount\" value=\"\" placeholder=\"How many rolls?\"/>\n\t\t`,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\t//icon: '<i class=\"fas fa-check\"></i>',\n\t\t\t\tlabel: \"Cancel\",\n\t\t\t\tcallback: () => {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\troll: {\n\t\t\t\ticon: '<i class=\"fas fa-dice\"></i>',\n\t\t\t\tlabel: \"Roll\",\n\t\t\t\tcallback: (html) => {\n\t\t\t\t\tMain(html.find(\"#rollCount\")[0].value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdefault: \"roll\",\n\t\trender: html => console.log(\"Register interactivity in the rendered dialog\"),\n\t\tclose: html => console.log(\"This always is logged no matter which option is chosen\")\n\t});\n\td.render(true);\n}","folder":null,"sort":0,"permission":{"default":0,"BtAhBRW9P5xaS8hf":3},"flags":{"core":{"sourceId":"Macro.ndJ4zr5podxyvd7T"}},"_id":"s7HXPfgqE1vIMiDo"}
